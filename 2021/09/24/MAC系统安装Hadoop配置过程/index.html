<!DOCTYPE html>
<html>
<head>
    <title>AnywhereDoor</title>
    <meta charset="utf-8">
    <meta name=“viewport” content=“width=device-width; initial-scale=1.0”>



    
<link rel="stylesheet" href="/css/font-awesome.min.css">

        <!-- 代码高亮库 -->
    
<link rel="stylesheet" href="/css/default.min.css">

    
<link rel="stylesheet" href="/css/main.css">

    
<link rel="stylesheet" href="/css/post.css">

    <!-- 引入JQ js -->
    
<script src="/js/jquery-3.6.0.min.js"></script>


<meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="Anywheredoor" type="application/atom+xml">
</head>


<body>


<!-- 强制横屏div -->
<div id="warning-message">
    <div class="Wgifgif">
        <!-- <img src="img/a.gif" style="width: 8em; display:block;"> -->
        <img src="/img/a.gif">
    </div>
    
    <p id="eng">This website is only viewable in landscape mode. Please change your mobile to landscape mode.</p>
    <p id="jap">こちらのウェブページはランドスケープモードのみ対応しており、お端末を回転し、横画面モードで御覧ください。</p>
    <p id="chi">该网页仅可在横屏模式下浏览，<br>请旋转您的设备至横屏模式。<br><br> >_< </p>
</div>

<!-- loading div -->
<div id="loading">
    <div class="loadingIMG">
        <img src="/img/loading.png" width="8em">
    </div>
</div>



<!-- 主要布局开始 -->
<div class="column" id="left">
    <div id="light" onclick="switchLight()" class="dayTime">

        <svg>
             <g>
              <title>Switch</title>
              <line id="swicth-line" y2="200" x2="48" x1="48"/>
              <ellipse id="swicth-round" ry="5" rx="5" cy="200" cx="48"/>
             </g>
        </svg>
        <span class="tooltiptext">点击开灯/关灯</span>
    </div>
    <div class="copyright"><p>©2021 Anywheredoor</p></div>
</div>


<div class="column" id="medium">
    
    <div id="nav">
         
<link rel="stylesheet" href="/css/main.css">


<ul id="menu">
            
            <li class="menu-item">
                <a href="/">|HOME</a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">|BLOGS</a>
            </li>
            
            <li class="menu-item">
                <a href="/tags/">|CATEGORY</a>
            </li>
            
            <li class="menu-item">
                <a href="/about">|ABOUT</a>
            </li>
            
            <li class="menu-item">
                <a href="/comment">|COMMENT</a>
            </li>
            
</ul>

<!-- 点击高亮js -->
<script type="text/javascript">
    var oLis=document.getElementsByTagName("a");
    var i,j;
    var length=oLis.length;
    for(i=0;i<length;i++){
        oLis[i].onclick=function(){
            for(j=0;j<length;j++){
                oLis[j].className="";
            }
            this.className+="clickstyle";
        }
    }
</script>

    </div>
    
    <div id="container">

        
            <section class="main">  
          

          

<link rel="stylesheet" href="/css/post.css">


<link rel="stylesheet" href="/css/font-awesome.min.css">


<div class="row" id="postPage">
	<!-- 侧边栏 -->
	<div class="aside">
       

<!-- 侧边目录栏 -->

<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F"><span class="toc-text">系统</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#bash-profile"><span class="toc-text">.bash_profile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#core-site-xml"><span class="toc-text">core-site.xml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hdfs-site-xml"><span class="toc-text">hdfs-site.xml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mapred-site-xml"><span class="toc-text">mapred-site.xml</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8"><span class="toc-text">启动</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%90%E8%A1%8Cword-count%E7%A4%BA%E4%BE%8B%E7%A8%8B%E5%BA%8F"><span class="toc-text">运行word count示例程序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%A6%96%E5%85%88%E5%9C%A8%E7%A9%BA%E7%A9%BA%E7%9A%84file-system%E4%B8%AD%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9%E3%80%82"><span class="toc-text">1. 首先在空空的file system中创建文件夹。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%90%91%E6%96%87%E4%BB%B6%E5%A4%B9%E9%87%8C%E4%BC%A0%E8%BE%93%E4%B8%80%E4%B8%AAtxt%EF%BC%8C%E4%BD%9C%E4%B8%BAwordcount%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%BE%93%E5%85%A5%E6%96%87%E6%9C%AC%E3%80%82"><span class="toc-text">2. 向文件夹里传输一个txt，作为wordcount程序的输入文本。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%89%A7%E8%A1%8Cwordcount%E7%A8%8B%E5%BA%8F"><span class="toc-text">3. 执行wordcount程序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98"><span class="toc-text">遇到问题</span></a></li></ol>


    </div>


    <!-- 文章内容 -->
    <div class="postContent">
    	    

            
			<div class="article_content">
				<!-- 文章信息 -->
			<div class="post_info">
			    
				<div class="post_title" id="postTitle">
			      <span>MAC系统安装Hadoop配置过程</span>
			    </div>
			    
			    <div class="post_auther_date_tag">
			      <span id="post-author">emo</span>
			      |
			      <span id="post-date">2021年09月24日</span>
			      |
			      <span class="fa fa-tag" id="text-tag"><a class="tag-link-link" href="/tags/bigdata/" rel="tag">bigdata</a>,<a class="tag-link-link" href="/tags/%E6%90%AD%E5%BB%BA%E5%90%84%E7%A7%8D%E5%90%84%E6%A0%B7%E7%9A%84%E7%8E%AF%E5%A2%83/" rel="tag">搭建各种各样的环境</a></span>
			      
			    </div>

		     </div>

			    <!-- 正文 -->
			    <p>记录Haddop3.3.1的配置、启动和运行示例文件，以及遇到的问题和解决。</p>
<a id="more"></a>

<h1 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h1><p>macOS Big Sur 11.4</p>
<p>hadoop3.3.1</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><ol>
<li>打开设置中的ssh开关。配置好无需密码登录（这一步以前就做过了。）</li>
<li><code>brew install hadoop</code><br>会自动安装好hadoop的最新版本（当前是3.3.1）。 </li>
</ol>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="bash-profile"><a href="#bash-profile" class="headerlink" title=".bash_profile"></a>.bash_profile</h2><pre><code># 原来就有的java配置
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home
export PATH=$JAVA_HOME/bin:$PATH

# 新增的hadoop相关配置
export CLASSPAHT=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export HADOOP_HOME=/usr/local/Cellar/hadoop/3.3.1/libexec
export HADOOP_COMMON_HOME=$HADOOP_HOME
export PATH=$JAVA_HOME/bin:$PATH:$HADOOP_HOME/bin:/usr/local/Cellar/scala/bin</code></pre><p>如果不知道java_home具体应该填的路径，就用<br><code>/usr/libexec/java_home -V</code><br>获取。</p>
<h2 id="core-site-xml"><a href="#core-site-xml" class="headerlink" title="core-site.xml"></a>core-site.xml</h2><pre><code>&lt;property&gt;
     &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; 
     &lt;value&gt;file:/usr/local/Cellar/hadoop/3.3.1/libexec/tmp&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
     &lt;name&gt;fs.defaultFS&lt;/name&gt;
     &lt;value&gt;hdfs://localhost:8020&lt;/value&gt;
  &lt;/property&gt;</code></pre><h2 id="hdfs-site-xml"><a href="#hdfs-site-xml" class="headerlink" title="hdfs-site.xml"></a>hdfs-site.xml</h2><pre><code>    &lt;property&gt;
         &lt;name&gt;dfs.replication&lt;/name&gt;
         &lt;value&gt;1&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt; 
         &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
         &lt;value&gt;file:/usr/local/Cellar/hadoop/3.3.1/libexec/tmp/dfs/name&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
         &lt;name&gt;dfs.namenode.data.dir&lt;/name&gt;
         &lt;value&gt;file:/usr/local/Cellar/hadoop/3.3.1/libexec/tmp/dfs/data&lt;/value&gt;
    &lt;/property&gt;</code></pre><h2 id="mapred-site-xml"><a href="#mapred-site-xml" class="headerlink" title="mapred-site.xml"></a>mapred-site.xml</h2><pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;mapred.job.tracker&lt;/name&gt;
        &lt;value&gt;localhost:9010&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre><h1 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h1><ol>
<li>一开始先format</li>
</ol>
<p><code>cd /usr/local/Cellar/hadoop/3.3.1/bin</code>  </p>
<p><code>./hdfs namenode -format</code></p>
<ol start="2">
<li>然后start all</li>
</ol>
<p><code>cd /usr/local/Cellar/hadoop/3.3.1/sbin</code></p>
<p><code>./start-all.sh</code></p>
<ol start="3">
<li>最后用jps查看进程<br><img src="https://i.loli.net/2021/09/24/6MtYiWLdhUcGfTZ.png" alt="6MtYiWLdhUcGfTZ"></li>
</ol>
<h1 id="运行word-count示例程序"><a href="#运行word-count示例程序" class="headerlink" title="运行word count示例程序"></a>运行word count示例程序</h1><h2 id="1-首先在空空的file-system中创建文件夹。"><a href="#1-首先在空空的file-system中创建文件夹。" class="headerlink" title="1. 首先在空空的file system中创建文件夹。"></a>1. 首先在空空的file system中创建文件夹。</h2><ul>
<li>cd到bin文件夹里。</li>
</ul>
<p><code>cd /usr/local/Cellar/hadoop/3.3.1/bin</code></p>
<ul>
<li>在hadoop文件系统中新建一个文件夹</li>
</ul>
<p><code>hadoop fs -mkdir /input</code></p>
<ul>
<li>运行<code>hadoop fs -ls /</code>就可以看到目前的文件系统。浏览器访问localhost:9870的Web Interface，从导航菜单找到Browse the file system，点进去可以看到图形界面。也可以看到刚刚创建的input文件夹。</li>
</ul>
<h2 id="2-向文件夹里传输一个txt，作为wordcount程序的输入文本。"><a href="#2-向文件夹里传输一个txt，作为wordcount程序的输入文本。" class="headerlink" title="2. 向文件夹里传输一个txt，作为wordcount程序的输入文本。"></a>2. 向文件夹里传输一个txt，作为wordcount程序的输入文本。</h2><ul>
<li>cd到hadoop的root文件夹看一看</li>
</ul>
<p><code>cd /usr/local/Cellar/hadoop/3.3.1/</code></p>
<p>然后执行<code>ll</code><br><img src="https://i.loli.net/2021/09/24/RVcO7nzUqxFyCG8.png" alt="RVcO7nzUqxFyCG8"></p>
<p>打算上传的是LICENSE.txt。看看这个txt里有多少个word。</p>
<ul>
<li>执行<code>hadoop fs -put LICENSE.txt /input</code>进行上传。下图是传好后的样子。</li>
</ul>
<p><img src="https://i.loli.net/2021/09/24/AyYfQZHuzxTJFsv.png" alt="AyYfQZHuzxTJFsv"></p>
<h2 id="3-执行wordcount程序"><a href="#3-执行wordcount程序" class="headerlink" title="3. 执行wordcount程序"></a>3. 执行wordcount程序</h2><ul>
<li>在bin文件夹下执行：</li>
</ul>
<p><code>hadoop jar /usr/local/Cellar/hadoop/3.3.1/libexec/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.1.jar wordcount /input /output</code></p>
<p>最后三个参数的意思是：wordcount是测试用例的名称，／input表示输入文件的目录，/output表示输出文件的目录。</p>
<ul>
<li>跑完的结果</li>
</ul>
<p><img src="https://i.loli.net/2021/09/24/BPtgxLJMR573Wfv.png" alt="BPtgxLJMR573Wfv"></p>
<p>使用命令<code>hadoop fs -cat /output/part-r-00000</code>就可以看到结果</p>
<p><img src="https://i.loli.net/2021/09/24/dBIx18pb3Z4PUnw.png" alt="dBIx18pb3Z4PUnw"></p>
<h1 id="遇到问题"><a href="#遇到问题" class="headerlink" title="遇到问题"></a>遇到问题</h1><ol>
<li><p>在配置好之后，第一次start-all，提示<br><code>ssh:Could not resolve hostname emolocal: nodename nor servname provided, or not known</code></p>
<p> 在搜索了网上所有的相关报错的解决方法都不行之后，我只能寄希望于自己了。最后想起来emoLocal是我更改过的hostname，就用<code>sudo scutil --set HostName localhost</code>    把它改回了localhost。（终端输入<code>hostname</code>可以查看当前hostname）然后hadoop的start-all就没有报错了。</p>
</li>
<li><p>一个马虎的错误<br> 在执行wordcount程序的时候，命令的后半部分三个参数 要用空格隔开。。。。</p>
</li>
</ol>

			</div>
    </div>

</div>




          </section> 
    </div>
    
</div>


<div class="column" id="right">
    <div id="links">
        <ul>
            <li><a href="mailto:464042992@qq.com" class="fa fa-envelope fa-fw"></a></li>
            <li><a target="_blank" rel="noopener" href="https://github.com/zhangdairui" class="fa fa-github fa-fw"></a></li>
            <li><a href="https://anywheredoor.fun/atom.xml" class="fa fa-heart fa-fw"></a></li>
        </ul>
    </div>
</div>



</div>



<!-- 切换白天黑夜模式-->
<script>

    if (localStorage.getItem('dark') === '1') {
        document.body.classList.add('dark');
        }
        else if(localStorage.getItem('dark') === '0'){
        document.body.classList.remove('dark');
        }

    
    // 深色模式设置
    function switchLight() {
        var body = document.body;
        if(body.classList.contains('dark')){
        document.body.classList.remove('dark');
        localStorage.setItem('dark','0');
        $('html').css("cursor","default");
        } else {
        document.body.classList.add('dark');
        localStorage.setItem('dark','1');
        }
    }

</script>


<!-- loading用js -->
<script>
   window.onload = function() {
    //0.感应白天黑夜
    if (localStorage.getItem('dark') === '1') {
        document.body.classList.add('dark'); //开启黑暗模式
        
    }else if(localStorage.getItem('dark') === '0'){
        document.body.classList.remove('dark');
        $('html').css("cursor","default");
    }


    // 1. loading图案
  const spinner = document.getElementById('loading');
  spinner.classList.add('loaded');
    

    // 2. 排列tags 不写在这里到时候会冲突
          var obox=document.getElementById("all_tags");
          var obj=obox.getElementsByClassName("tag-link-link");

          //获取标签可活动区域
          var windowW = obox.getBoundingClientRect().width - 800;
          var windowH = obox.getBoundingClientRect().height -200;

          //随机方法
          function rand(num){
           return parseInt(Math.random()*num+1);
          }

          //循环
          for( len=obj.length,i=len;i--;){

            obj[i].style.position="relative";
            obj[i].style.zIndex=rand(5);
            obj[i].style.fontSize=rand(12)+6+"px";
            
          //随机获取位置
          obj[i].style.left = parseInt(Math.random() * windowW) + 'px';
          obj[i].style.top = parseInt(Math.random() * windowH) + 'px';
          }
    }
</script>


<!-- 引入代码高亮的 js -->

<script src="/js/highlight.min.js"></script>

<script>hljs.highlightAll();</script>





</body>

</html>